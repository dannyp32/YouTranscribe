<!DOCTYPE html>

<html>
    <head>
        <title>Youtube API Test</title>
        
        <link rel="stylesheet" type="text/css" href="css/youtube.css">
    </head>
        
    <body> 
        <div id="ytdiv">
            <h1 id='title'>Youtube title</h1>
            <h2 id='duration'>00:00</h2>

            <div id="ytplayer"></div>

            <p id="description"></p>
        
        </div>
        
        
        <div id="textboxes"></div>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js" type="text/javascript"></script>
        <script>
            var videoID = 'YqKGTq1p7Qs';
            var splitLen = 10;
            
            function secformat(sec) {
                var fm = [
                    Math.floor(sec/60) % 60, // Minutes
                    sec % 60 // Seconds
                ];
                
                return $.map(fm, function(v,i) {
                    return ((v < 10) ? '0' : '') +v;}).join(':');
            }
            
            function addTextboxes(duration) {
                var numBoxes = Math.ceil(duration/splitLen);
                
                for (i = 0; i < numBoxes; i++) {
                    var start = i*splitLen;
                    var end = start + splitLen-1;
                    
                    if (end > duration) {
                        end = duration;
                    }
                    
                    var newLabel = $(document.createElement('div')).attr('id', 'lab');
                    var newText = $(document.createElement('div')).attr('id', 'tex');
                    
                    newLabel.after().html('<label>' + start + '-' + end + '</label>');
                    newText.after().html('<textarea name="text' + i + '" rows="6" cols="40" >');
                    
                    newLabel.appendTo('#textboxes');
                    newText.appendTo('#textboxes');
                }
            }
            
            $.getJSON('https://gdata.youtube.com/feeds/api/videos/' + videoID + '?v=2&alt=jsonc', function(result) {
                $('#title').html(result.data.title);
                $('#duration').html(secformat(result.data.duration));
                $('#description').html(result.data.description);
                addTextboxes(result.data.duration);
            });
            
          // Load the IFrame Player API code asynchronously.
          var tag = document.createElement('script');
          tag.src = "https://www.youtube.com/player_api";
          var firstScriptTag = document.getElementsByTagName('script')[0];
          firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

          // Replace the 'ytplayer' element with an <iframe> and
          // YouTube player after the API code downloads.
          var player;
          function onYouTubePlayerAPIReady() {
            player = new YT.Player('ytplayer', {
              height: '360',
              width: '620',
              videoId: videoID,
              playerVars: {
                  controls: 1,
                  showinfo: 1
              }
            });
          }
        </script>
        
        
    </body>
    
</html>